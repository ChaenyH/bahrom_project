{% extends "base.html" %}

{% block title %}ì—¬í–‰ ê°€ê³„ë¶€{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/budget.css') }}">
{% endblock %}

{% block content %}
<header>
    <h1>ğŸ’° ì—¬í–‰ ê°€ê³„ë¶€ ğŸ’°</h1>
</header>

<main>
    <!-- ì—¬í–‰ ì •ë³´ ì…ë ¥ -->
    <section>
        <h2>ì—¬í–‰ ì •ë³´ ì…ë ¥</h2>
        <form method="POST" action="/budget">
            <label for="travel_location">ì—¬í–‰ì§€:</label>
            <input type="text" id="travel_location" name="travel_location" required>
            
            <label for="budget">ì´ ì˜ˆì‚°:</label>
            <input type="number" id="budget" name="budget" required>

            <button type="submit">ì €ì¥</button>
        </form>
    </section>

    <!-- ì†Œë¹„ ê¸°ë¡ -->
    <section>
        <h2>ì†Œë¹„ ê¸°ë¡</h2>
        <section class="upload_receipt">
            <h3>ì˜ìˆ˜ì¦ ì—…ë¡œë“œ</h3>
            <form method="POST" action="/upload_receipt" enctype="multipart/form-data">
                <input type="file" name="file" accept="image/*" class="upload_receipt">
                <button type="submit">ì—…ë¡œë“œ</button>
            </form>
        </section>            
        <form method="POST" action="/budget">
            <label for="date">ë‚ ì§œ:</label>
            <input type="date" id="date" name="date">
    
            <label for="category">ì¹´í…Œê³ ë¦¬:</label>
            <select id="category" name="category">
                <option value="ì‹ë¹„">ì‹ë¹„</option>
                <option value="êµí†µ">êµí†µ</option>
                <option value="ì‡¼í•‘">ì‡¼í•‘</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
    
            <label for="amount">ê¸ˆì•¡:</label>
            <input type="number" id="amount" name="amount" required>
    
            <label for="memo">ë©”ëª¨:</label>
            <input type="text" id="memo" name="memo">
    
            <button type="submit">ì¶”ê°€</button>
        </form>
    
        <table>
            <thead>
                <tr>
                    <th>ë‚ ì§œ</th>
                    <th>ì¹´í…Œê³ ë¦¬</th>
                    <th>ê¸ˆì•¡</th>
                    <th>ë©”ëª¨</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                <tr>
                    <td>{{ expense.date }}</td>
                    <td>{{ expense.category }}</td>
                    <td>{{ "{:,.0f}".format(expense.amount) }}ì›</td>
                    <td>{{ expense.memo }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
    
    <!-- ë‚¨ì€ ì˜ˆì‚° -->
    <section>
        <h2>ì˜ˆì‚° í˜„í™©</h2>
        <p>ì´ ì˜ˆì‚°: 1,000,000ì›</p>
        <p>í˜„ì¬ ì§€ì¶œ: {{ "{:,.0f}".format(total_spent) }}ì›</p>
        <p>ë‚¨ì€ ì˜ˆì‚°: {{ "{:,.0f}".format(remaining_budget) }}ì›</p>
    
        <div style="border: 1px solid #ddd; border-radius: 5px; overflow: hidden;">
            <div style="width: {{ (total_spent / 1000000) * 100 }}%; background-color: #4CAF93; height: 20px;"></div>
        </div>
    </section>        
</main>

<script src="{{ url_for('static', filename='js/budget.js') }}"></script>
{% endblock %}