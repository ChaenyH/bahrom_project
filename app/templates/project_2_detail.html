{% extends "base.html" %}

{% block title %}여행 계획 및 예산 관리{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/project_2_style.css') }}">
{% endblock %}

{% block content %}
<div class="parent-container">
    <!-- 페이지 헤더 -->
    <div class="project-header">
        <h1>여행 계획 및 예산 관리</h1>
        <p>효율적인 예산 관리와 윤리적인 소비를 돕는 여행 도구를 사용해 보세요.</p>
    </div>

    <!-- 여행지와 예산 입력 -->
    <section id="input-section">
        <h2>여행지와 예산 입력</h2>
        <form id="budget-form">
            <label for="destination">여행지:</label>
            <input type="text" id="destination" placeholder="예: 미국, 일본, 프랑스" required />
            
            <label for="budget">예산 (원):</label>
            <input type="number" id="budget" placeholder="총 예산 입력" required />

            <button type="button" onclick="convertCurrency()">환율 적용</button>
        </form>
        <p id="converted-currency"></p>
    </section>

    <!-- 소비 내역 -->
    <section id="expense-section">
        <h2>소비 내역 입력</h2>
        <form id="expense-form">
            <label for="expense">소비 금액:</label>
            <input type="number" id="expense" placeholder="금액 입력" required />

            <label for="description">소비 설명:</label>
            <input type="text" id="description" placeholder="소비 내역 입력" />

            <button type="button" onclick="addExpense()">소비 기록 추가</button>
        </form>
        <ul id="expense-list"></ul>
    </section>

    <!-- 남은 예산 -->
    <section id="remaining-budget-section">
        <h2>남은 예산</h2>
        <p id="remaining-budget">남은 예산: <strong>0 원</strong></p>
    </section>

    <!-- 윤리적 소비 평가 -->
    <section id="evaluation-section">
        <h2>여행 종료 후 윤리적 소비 평가</h2>
        <button onclick="evaluateTrip()">평가 보기</button>
        <p id="evaluation-result"></p>
    </section>

    <!-- 윤리적 소비 챗봇 -->
    <section id="chatbot-section">
        <h2>윤리적 소비를 위한 챗봇</h2>
        <textarea id="chat-input" placeholder="여행 중 소비에 대한 고민을 입력하세요"></textarea>
        <button onclick="chatWithBot()">챗봇에게 물어보기</button>
        <div id="chat-response"></div>
    </section>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // JS 코드가 DOM 로드 이후 실행되도록 보장
        console.log("DOM fully loaded and parsed");
    });
</script>
<script src="{{ url_for('static', filename='js/project_2_script.js') }}"></script>
{% endblock %}
